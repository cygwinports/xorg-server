--- origsrc/xorg-server-1.5.3/hw/kdrive/ephyr/Makefile.am	2008-11-16 01:04:41.660986300 -0600
+++ src/xorg-server-1.5.3/hw/kdrive/ephyr/Makefile.am	2008-11-16 01:04:23.551611300 -0600
@@ -27,6 +27,7 @@
 
 if XV
 libxephyr_hostxv_a_SOURCES=				\
+	ephyrvideo.c \
 	ephyrhostvideo.c \
 	ephyrhostvideo.h
 endif
@@ -54,7 +55,6 @@
 libxephyr_a_SOURCES =	\
 	ephyr.c		\
 	ephyr_draw.c	\
-	ephyrvideo.c	\
 	os.c		\
 	hostx.h         \
 	ephyr.h		\
--- origsrc/xorg-server-1.5.3/hw/kdrive/src/Makefile.am	2008-11-16 01:04:41.660986300 -0600
+++ src/xorg-server-1.5.3/hw/kdrive/src/Makefile.am	2008-11-16 00:40:32.000000000 -0600
@@ -12,6 +12,12 @@
 	vga.h
 endif
 
+if XV
+KDRIVE_XV_SOURCES = \
+	kxv.c		\
+	kxv.h
+endif
+
 libkdrive_a_SOURCES =	\
 	fourcc.h	\
 	kaa.c		\
@@ -31,8 +37,7 @@
 	koffscreen.c	\
 	kshadow.c	\
 	ktest.c		\
-	kxv.c		\
-	kxv.h		\
+	$(KDRIVE_XV_SOURCES) \
 	$(KDRIVE_HW_SOURCES) \
         $(top_srcdir)/mi/miinitext.c
 
