---
 xserver/configure.ac              |    1 
 xserver/hw/xwin/Makefile.am       |    2 -
 xserver/hw/xwin/XWin.exe.manifest |   16 +++++++++++
 xserver/hw/xwin/XWin.rc           |   51 +++++++++++++++++---------------------
 xserver/hw/xwin/windialogs.c      |    6 ++--
 xserver/hw/xwin/winresource.h     |    1 
 xserver/include/xwin-config.h.in  |    1 
 7 files changed, 45 insertions(+), 33 deletions(-)

Index: xorg-server-1.5.3/xserver/hw/xwin/XWin.exe.manifest
===================================================================
--- /dev/null
+++ xorg-server-1.5.3/xserver/hw/xwin/XWin.exe.manifest
@@ -0,0 +1,16 @@
+<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
+<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
+	<description>The XWin X Windows server for Cygwin.</description>
+	<dependency>
+	   <dependentAssembly>
+	     <assemblyIdentity
+	       type="win32"
+	       name="Microsoft.Windows.Common-Controls"
+	       version="6.0.0.0"
+	       processorArchitecture="X86"
+	       publicKeyToken="6595b64144ccf1df"
+	       language="*"
+	     />
+	   </dependentAssembly>
+	</dependency>
+</assembly>
Index: xorg-server-1.5.3/xserver/hw/xwin/XWin.rc
===================================================================
--- xorg-server-1.5.3.orig/xserver/hw/xwin/XWin.rc
+++ xorg-server-1.5.3/xserver/hw/xwin/XWin.rc
@@ -1,5 +1,6 @@
 /*
  *Copyright (C) 2002-2004 Harold L Hunt II All Rights Reserved.
+ *Copyright (C) 2008 Yaakov Selkowitz All Rights Reserved
  *
  *Permission is hereby granted, free of charge, to any person obtaining
  * a copy of this software and associated documentation files (the
@@ -20,47 +21,43 @@
  *CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
  *WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
  *
- *Except as contained in this notice, the name of Harold L Hunt II
+ *Except as contained in this notice, the names of the authors
  *shall not be used in advertising or otherwise to promote the sale, use
  *or other dealings in this Software without prior written authorization
- *from Harold L Hunt II.
+ *from the authors.
  *
- * Authors:	Harold L Hunt II
+ * Authors:	Harold L Hunt II, Yaakov Selkowitz
  */
 
-#include "windows.h"
+#include <windows.h>
 #include "winresource.h"
+#include "xwin-config.h"
 
 /*
  * Dialogs
  */
 
 /* About */
-ABOUT_BOX DIALOG DISCARDABLE  32, 32, 240, 105
+ABOUT_BOX DIALOGEX  32, 32, 260, 95
 STYLE WS_POPUP | WS_CAPTION | WS_SYSMENU | WS_VISIBLE | WS_TABSTOP  | DS_CENTERMOUSE
 CAPTION "About " PROJECT_NAME
-FONT 8, "MS Sans Serif"
+FONT 8, "MS Shell Dlg 2"
 BEGIN
-  CONTROL               PROJECT_NAME " Website", ID_ABOUT_WEBSITE, "Button",
-                        BS_OWNERDRAW | WS_TABSTOP, 30, 45, 75, 15
-  CONTROL               "Change Log", ID_ABOUT_CHANGELOG, "Button",
-                        BS_OWNERDRAW | WS_TABSTOP, 135, 45, 75, 15
-  CONTROL               "User's Guide", ID_ABOUT_UG, "Button",
-                        BS_OWNERDRAW | WS_TABSTOP, 30, 65, 75, 15
-  CONTROL               "FAQ", ID_ABOUT_FAQ, "Button",
-                        BS_OWNERDRAW | WS_TABSTOP, 135, 65, 75, 15
-
-  DEFPUSHBUTTON		"Dismiss", IDOK, 95, 85, 50, 15
-
-  CTEXT			"Welcome to the preliminary About box for the " PROJECT_NAME " X Server.  This dialog was created on 2004/03/25 and will eventually be filled with more useful information.  For now, use the links below to learn more about the " PROJECT_NAME " project.", IDC_STATIC, 5, 5, 230, 35
+  CONTROL				IDI_XWIN, IDC_STATIC, "Static", SS_ICON, 8, 8, 32, 32
+  LTEXT			PROJECT_NAME " X Server ", IDC_STATIC, 36, 8, 220, 8
+  LTEXT			"Version " PROJECT_VERSION, IDC_STATIC, 36, 18, 220, 8
+  LTEXT			"This product is licensed under the terms of the MIT/X11 License.", IDC_STATIC, 36, 38, 220, 20
+  CONTROL               __VENDORDWEBSUPPORT__, ID_ABOUT_WEBSITE, "Button",
+                        BS_OWNERDRAW | WS_TABSTOP, 36, 58, 68, 8
+  DEFPUSHBUTTON		"OK", IDOK, 105, 75, 50, 15
 END
 
 
 /* Depth change */
 
-DEPTH_CHANGE_BOX DIALOG DISCARDABLE	32, 32, 180, 100
+DEPTH_CHANGE_BOX DIALOGEX	32, 32, 180, 100
 STYLE WS_POPUP | WS_CAPTION | WS_SYSMENU | WS_VISIBLE | DS_CENTERMOUSE
-FONT 8, "MS Sans Serif"
+FONT 8, "MS Shell Dlg 2"
 CAPTION PROJECT_NAME
 BEGIN
   DEFPUSHBUTTON		"Dismiss", IDOK, 66, 80, 50, 14
@@ -72,10 +69,10 @@ END
 
 /* Exit */
 
-EXIT_DIALOG DIALOG DISCARDABLE	32, 32, 180, 78
+EXIT_DIALOG DIALOGEX	32, 32, 180, 78
 STYLE WS_POPUP | WS_CAPTION | WS_SYSMENU | WS_VISIBLE | WS_TABSTOP | DS_CENTERMOUSE
-FONT 8, "MS Sans Serif"
-CAPTION PROJECT_NAME " - Exit?"
+FONT 8, "MS Shell Dlg 2"
+CAPTION "Exit " PROJECT_NAME "?"
 BEGIN
   PUSHBUTTON "E&xit", IDOK, 55, 56, 30, 14
   DEFPUSHBUTTON "&Cancel", IDCANCEL, 95, 56, 30, 14
@@ -89,14 +86,14 @@ END
  * Menus
  */
 
-IDM_TRAYICON_MENU MENU DISCARDABLE
+IDM_TRAYICON_MENU MENU
 BEGIN
 	POPUP "TRAYICON_MENU"
 	BEGIN
 		MENUITEM "&Hide Root Window", ID_APP_HIDE_ROOT
 		MENUITEM "&About...", ID_APP_ABOUT
 		MENUITEM SEPARATOR
-		MENUITEM "E&xit", ID_APP_EXIT
+		MENUITEM "E&xit...", ID_APP_EXIT
 	END
 END
 
@@ -105,5 +102,5 @@ END
  * Icons
  */
 
-IDI_XWIN		ICON	DISCARDABLE	"X.ico"
-IDI_XWIN_BOXED		ICON	DISCARDABLE	"X-boxed.ico"
+IDI_XWIN		ICON	"X.ico"
+CREATEPROCESS_MANIFEST_RESOURCE_ID	RT_MANIFEST	"XWin.exe.manifest"
Index: xorg-server-1.5.3/xserver/hw/xwin/windialogs.c
===================================================================
--- xorg-server-1.5.3.orig/xserver/hw/xwin/windialogs.c
+++ xorg-server-1.5.3/xserver/hw/xwin/windialogs.c
@@ -112,8 +112,8 @@ winDrawURLWindow (LPARAM lParam)
     crText = RGB(0,0,128+64);
   SetTextColor (draw->hDC, crText);
   
-  /* Create underlined font 14 high, standard dialog font */
-  font = CreateFont (-14, 0, 0, 0, FW_NORMAL, FALSE, TRUE, FALSE,
+  /* Create font 8 high, standard dialog font */
+  font = CreateFont (-8, 0, 0, 0, FW_DONTCARE, FALSE, FALSE, FALSE,
 		     0, 0, 0, 0, 0, "MS Sans Serif");
   if (!font)
     {
@@ -706,7 +706,7 @@ winAboutDlgProc (HWND hwndDialog, UINT m
 
 	case ID_ABOUT_WEBSITE:
 	  {
-	    const char *	pszPath = "http://x.cygwin.com/";
+	    const char *	pszPath = __VENDORDWEBSUPPORT__;
 	    int			iReturn;
 	    
 	    iReturn = (int) ShellExecute (NULL,
Index: xorg-server-1.5.3/xserver/hw/xwin/winresource.h
===================================================================
--- xorg-server-1.5.3.orig/xserver/hw/xwin/winresource.h
+++ xorg-server-1.5.3/xserver/hw/xwin/winresource.h
@@ -37,7 +37,6 @@
 
 #define IDC_STATIC		-1
 #define IDI_XWIN		101
-#define IDI_XWIN_BOXED		102
 #define IDM_TRAYICON_MENU	103
 #define IDC_CLIENTS_CONNECTED	104
 
Index: xorg-server-1.5.3/xserver/configure.ac
===================================================================
--- xorg-server-1.5.3.orig/xserver/configure.ac
+++ xorg-server-1.5.3/xserver/configure.ac
@@ -1660,6 +1660,7 @@ AC_MSG_RESULT([$XWIN])
 
 if test "x$XWIN" = xyes; then
 	AC_DEFINE_UNQUOTED(XORG_VERSION_CURRENT, [$VENDOR_RELEASE], [Current Xorg version])
+	AC_DEFINE_UNQUOTED(__VENDORDWEBSUPPORT__, ["$VENDOR_WEB"], [Vendor web address for support])
 	AC_CHECK_TOOL(WINDRES, windres)
 	case $host_os in
 		cygwin*)
Index: xorg-server-1.5.3/xserver/include/xwin-config.h.in
===================================================================
--- xorg-server-1.5.3.orig/xserver/include/xwin-config.h.in
+++ xorg-server-1.5.3/xserver/include/xwin-config.h.in
@@ -21,4 +21,7 @@
 #undef _XSERVER64
 
 /* Do we require our own snprintf? */
-#undef NEED_SNPRINTF
+#undef NEED_SNPRINTF
+
+/* Vendor web address for support */
+#undef __VENDORDWEBSUPPORT__
\ No newline at end of file
Index: xorg-server-1.5.3/xserver/hw/xwin/Makefile.am
===================================================================
--- xorg-server-1.5.3.orig/xserver/hw/xwin/Makefile.am
+++ xorg-server-1.5.3/xserver/hw/xwin/Makefile.am
@@ -152,7 +152,7 @@ XWin_LDADD = $(XWIN_LIBS) $(XSERVER_LIBS
 XWin_LDFLAGS = -mwindows
 
 .rc.o:
-	$(WINDRES) --use-temp-file -i $< --input-format=rc -o $@ -O coff -I $(top_builddir)/include -DPROJECT_NAME=\"$(VENDOR_NAME_SHORT)\"
+	$(WINDRES) --use-temp-file -i $< --input-format=rc -o $@ -O coff -I $(top_builddir)/include -DPROJECT_NAME=\"$(VENDOR_NAME_SHORT)\" -DPROJECT_VERSION=\"$(PACKAGE_VERSION)\"
 
 winprefsyacc.h: winprefsyacc.c
 winprefslex.c: winprefslex.l winprefsyacc.c winprefsyacc.h
